version: '3.8'

services:
  # Production build với Nginx
  frontend-prod:
    build:
      context: ..
      dockerfile: docker/Dockerfile
    container_name: game-store-frontend-prod
    ports:
      - "3000:80"  # Map port 3000 của host -> port 80 của container
    restart: unless-stopped
    networks:
      - game-store-network
    # environment:
    #   - VITE_API_URL=http://backend:8080  # Nếu cần config API URL

  # Development build với hot-reload
  frontend-dev:
    build:
      context: ..
      dockerfile: docker/Dockerfile.dev
    container_name: game-store-frontend-dev
    ports:
      - "5173:5173"  # Map port 5173 của host -> port 5173 của container
    volumes:
      - ..:/app
      - /app/node_modules  # Prevent overwriting node_modules
    restart: unless-stopped
    networks:
      - game-store-network
    # environment:
    #   - VITE_API_URL=http://backend:8080

networks:
  game-store-network:
    driver: bridge
